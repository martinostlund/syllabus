<!doctype html>
<html lang="sv-se">

<head>
    <meta charset="utf-8">

    <title>The web as an application platform</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="icon" href="../images/favicon.png" type="image/png" />

    <link rel="stylesheet" href="../reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../reveal.js/css/theme/black.css" id="theme">
    <link rel="stylesheet" href="../reveal.js/css/theme/black.lnu.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="../reveal.js/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

    <div class="reveal lnu">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <!-- Start -->
            <section class="center" data-state="lnu-intro">
                <h3>The web as an application platform</h3>
                <h3>(1DV527)</h3>
                <h1>ReSTful Web APIs</h1>
                <div class="lnu-footer">
                    <img src="../images/lnu-logotype.png" />
                    <img src="../images/lnu-symbol.png" />
                </div>
            </section>

            <!-- CC -->
            <section data-state="lnu-cc">
                <h2>License for this work</h2>
                <p>
                    This work is produced by <a href="https://github.com/thajo" style="color: #333">John Häggerud</a> for the course 1DV527 at Linnaeus University.
                </p>
                <p>All content in this work excluding photographs, icons, picture of course literature and Linnaeus University logotype and symbol, is licensed under a
                <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />Creative Commons Attribution 4.0 International License</a>.</p>
                <h4>You are free to </h4>
                <ul>
                    <li>copy and redistribute the material in any medium or format</li>
                    <li>spread the whole or parts of the content</li>
                    <li>show the whole or parts of the content publicly and digital</li>
                    <li>convert the content to another format</li>
                    <li>change the content</li>
                </ul>
                <p>
                    If you change the content do not use the photographs, icons, picture of the course literature or Linnaeus University logotype and symbol in your new work!
                </p>
                <p>
                    At all times you must give credit to: ”Linnaeus university – Server-based Web Programming (1DV023/1DV523)” with the link <a style="color: #333" href="https://coursepress.lnu.se/kurs/serverbaserad-webbprogrammering/">https://coursepress.lnu.se/kurs/serverbaserad-webbprogrammering/</a> and to the Creative Common-license above.
                </p>
            </section>


             <section data-markdown>
                      <script type="text/template">
                        ## Content
                        * Web APIs - What, why, how
                          * Definition
                          * API-driven development
                        * ReSTful Web APIs
                          * Principles
                          

                      </script>
              </section>
              <section>
                <section data-markdown>
                        <script type="text/template">
                          ## Web API - What do we mean?

                          
                          * HTTP-based Application Programming Interface
                            * URL requests
                            * Responses in a web friendly data exchange format (JSON, XML, CSV, ...)
                          * An interface for creating and manipulating data trough an HTTP URL
                          * A server-side service interface
                            * The client is the consumer!
                          

                          <aside class="notes">
                           not Web API against browser
                           not ASP.NET Web API
                           UI not good choice of word
                         </aside>
                        </script>
                </section>

                <section data-markdown class="center">
                        <script type="text/template">
                          ## Feed us!
                          ```
                          GET http://api.sr.se/api/v2/scheduledepisodes?channelid=163&format=json
                          ```
                          ![data](../images/data-json.png)

                          <aside class="notes">
                           webbutvecklarprespektiv

                           affärsperspektiv, organisationsperspektiv o.s.v.
                         </aside>
                        </script>
                </section>

                <section data-markdown class="center">
                        <script type="text/template">
                          ## Why should I write web APIs?
                         
                        </script>
                </section>

                <section data-markdown class="center">
                        <script type="text/template">
                          ## Starting point
                          ![API](../images/api01.png)
                        </script>
                </section>

                <section data-markdown class="center">
                        <script type="text/template" >
                          ## Not just browser applications
                          ![API](../images/api02.png)
                          ### Shared data over multiple application
                        </script>
                </section>

                <section data-markdown class="center">
                        <script type="text/template">
                          ## API-driven development
                          ![API](../images/api04.png)
                        </script>
                </section>

                <section data-markdown class="center">
                        <script type="text/template">
                          ## Service-to-Service
                          ![API](../images/api06.png)
                        </script>
                </section>
<!--
                <section data-markdown class="center">
                        <script type="text/template">
                          ## Monolitic web app
                          ![API](../images/monolitic.png)
                        </script>
                </section>
              -->

                <section data-markdown class="center">
                        <script type="text/template">
                          ## Microservices
                          ![API](../images/api05.png)
                        </script>
                </section>

              </section>
              <section>
                  <section data-markdown>
                      <script type="text/template">
                        ## Context of APIs
                        * Private, internal
                        * Partner
                        * Public
                      </script>
                    </section>
    
                    <section data-markdown>
                      <script type="text/template">
                        ## Web APIs - The good parts
                          * Platform independence
                          * SOC, decoupled applications
                            * Flexibility
                            * Testing
                          * Integration, system-to-system (internal and external)
                          * Transparent, Open Data
                          * Innovation, Mashups
                      </script>
                    </section>
              
                    <section data-markdown>
                      <script type="text/template">
                        ## Web APIs - Challenges
                         * Backward compatibility, maintenance for users
                          * Hard to change a published (and used) API
                            * Versioning
                            * Changeability?
                         * Security? 
                          * Authentication (stateless)
                          * Data leakage
                         * Performance?
                          * "Chatty APIs"
                      </script>
                   </section>
              </section>
  
              <section>
                <section data-markdown class="">
                        <script type="text/template">
                          ## Building Web APIs
                          * Define domain semantics
                            * What are we trying to describe
                              * What data do the consumers want?
                              * Find your "things"/resources/models
                            * What should not be included in the API
                              * Private, sensitive data...
                          * Choose Architectural style
                            * URI CRUD-based
                            * Hypermedia API / ReSTful
                            * Event-driven
                              * Web Sockets, Web hooks...
                              * https://nordicapis.com/5-protocols-for-event-driven-api-architectures/
                        </script>
                </section>
              </section>
              <section>

                <section data-markdown class="">

                        <script type="text/template">
                          ## History
                          * CORBA/DCOM
                          * Web Service (WS-*)
                          * ReSTful Web APIs
                        </script>
                </section>

                <section class="stretch" data-background-image="../images/ws_overview.png">

                </section>

                <section class="stretch" data-background-image="../images/WSDL.png">

                </section>

                <section data-markdown class="center">
                  <script type="text/template">
                        <h2>SOAP</h2>
                        <img width="45%" src="../images/soap_request.png" alt="">
                        <p class="fragment">
                          "RESTful"<br>
                        ```
                          GET http://www.example.org/stockprice/IBM.json
                        ```
                        </p>
                    </script>
                </section>



                
            </section>

            
            <section>
              <section data-markdown class="">
                      <script type="text/template">
                        ## ReST
                        Representational State Transfer

                        Roy Fielding, Apache HTTP Server, DNT standard, Adobe
                        Architectural Styles and the Design of Network-based Software architectures

                        <img src="../images/roy.jpg" width="15%" alt="">

                        ReST is a networked, hypermedia architectural style - Typified by the web<!-- .element: class="fragment" -->
                        ReST demonstrates that the web is an application platform <!-- .element: class="fragment" -->
                      </script>
              </section>



              <section data-markdown class="">
                      <script type="text/template">
                        ## ReST constraints
                        * Client-Server
                          * Independent of each other
                        * Stateless server <!-- .element: class="fragment" -->
                          * The client is responsible for managing the state of the application.
                        * Cacheable <!-- .element: class="fragment" -->
                        * Layered System <!-- .element: class="fragment" -->
                          * A client don´t know if connected to end-server
                        * Uniform interface <!-- .element: class="fragment" -->
                          * Identification of resources
                          * Manipulations through representations
                          * Self-explaining messages
                          * Hypermedia as the engine of application state (HATEOAS)
                        * Code-on-demand (optional) <!-- .element: class="fragment" -->
                          * return executable code

                      </script>

              </section>
              <section data-markdown class="">
                      <script type="text/template">
                        ## Identification of resources
                        * ROA (Resource-oriented architecture)
                        * A resource is "a thing"
                          * "Everything is a thing"
                        * URI/URL for identifying a resource<!-- .element: class="fragment" -->
                            * https://www.example.com/users/
                            * https://www.example.com/users/thajo
                            * https://www.example.com/users/thajo/projects/SOS
                            * http://www.example.com/HGF653/1827Y/TREF6?filter=email,name,city
                            * http://www.example.com/getUser?id=123
                        * Pretty URLs is nice...just nice.<!-- .element: class="fragment" -->
                      </script>
              </section>
              <section data-markdown class="">
                      <script type="text/template">
                        ## Manipulations through representations
                        * An instance of a resource is a representation
                        * Multiple representation of a resource<!-- .element: class="fragment" -->
                          * application/json, application/xml, text/html
                        * HTTP have content negotiation<!-- .element: class="fragment" -->
                          * Accept: application/json
                          * Content-Type: text/html
                        * application/vnd.lnu.thajo-v2+json<!-- .element: class="fragment" -->
                          * Custom media-types
                          * Documented structure

                      </script>
              </section>

              <section data-markdown class="">
                      <script type="text/template">
                        ## Self-descripted messages
                        * HTTP verbs/methods
                        * HTTP Status codes

                        | Verbs        | Action           | Response Code |
                        | :------------- |:-------------| :-----|
                        | GET     | read-only, safe, idempotent | 200, 404, 500|
                        | POST     | unsafe, non-idempotent      | 201, 400, 403, 500 |
                        | PUT | unsafe, idempotent     | 200, 204, 403, 404, 409, 500 |
                        | PATCH | unsafe, idempotent     | 200, 204, 403, 404, 405, 409, 500 |
                        | DELETE | unsafe, idempotent     | 204, 403, 404, 405, 503 |

                      </script>
              </section>

              
              <section data-markdown class="">
                  <script type="text/template">
                    ## Examples

                    ```
                    POST http://www.example.com/users
                    Content-type: application/json
                    {"name": "John", "username": "thajo", "result": "10"}

                    GET http://www.example.com/users
                    Accept: application/json
                    
                    
                    GET http://www.example.com/users/thajo
                    Accept: application/json
                    

                    PUT http://www.example.com/users/123
                    Content-type: application/json
                    {"name": "John", "username": "thajo", "result": "20"}

                    PATCH http://www.example.com/users/123
                    Content-type: application/json
                    {"result": "30"}

                    DELETE PATCH http://www.example.com/users/123
                    ```

                  </script>
          </section>

              <section data-markdown class="">
                    <script type="text/template">
                      ## HATEOAS
                      * Hypermedia As The Engine Of Application State
                        * Unique from other network applications architectures 
                      * Browsing the API between states<!-- .element: class="fragment" -->
                        * State machine

                      “ The name ‘Representational State Transfer’ is intended to evoke an image of how a well-designed Web application behaves: a network of Web pages (a virtual state-machine), where the user progresses through the application by selecting links (state transitions), resulting in the next page (representing the next state of the application) being transferred to the user and rendered for their use.”<!-- .element: class="fragment" -->

                    </script>
              </section>
              <section data-markdown class="">
                  <script type="text/template">
                    ### ...nothing new...
                    ![Yeah](../images/github_ui.png)

                    <img src="../images/githubhtml.png" width="79%">
                  </script>
            </section>
            <section data-markdown class="">
              <script type="text/template">
                ## Jump to states by clicking links
                Virtual state machine 
                ![State](../images/state.png)

              </script>
        </section>
            <section data-markdown class="">
              <script type="text/template">
                ## Example
                * Links as state transitions
                    * Quiz-server - follow the links to the next question, where to send the answer <!-- .element: class="fragment" -->
                
                    
                <pre>   <!-- .element: class="fragment" -->
               
                GET http://vhost3.lnu.se:20080/question/1

                {
                  "id":1,"question":"What is 1+1?",
                  "nextURL":"http://vhost3.lnu.se:20080/answer/1",
                  "message":"You got your question! Now send me the answer via 
                             HTTP POST to the nextURL in JSON-format"
                } 
              </pre>
              </script>
        </section>
              
              
              
              <section data-markdown class="">
                    <script type="text/template">
                      ## Something to follow...
                     
                      * The ReSTful API should only have one entry point
                        * The server should drive the state
                        * The client should never concatenate new URLs
                        * We want to be able to write smart clients!

                      #### https://api.github.com/ <!-- .element: class="fragment" -->
                      <img src="../images/gh_links.png" width="60%" /> <!-- .element: class="fragment" -->
                    </script>
              </section>
              <!--
              <section data-markdown class="">
                    <script type="text/template">
                      ## Only states that make sense!

                      TA BORT?

                      <img src="../images/statemashine.png" width="50%" alt="">

                      Stolen from: https://speakerdeck.com/stilkov/rest-i-dont-think-it-means-what-you-think-it-does
                    </script>
              </section>
              -->
              <section data-markdown class="">

                <script type="text/template">
                      <img src="../images/problem.gif" width="35%" alt="">
                      * No standardized response? 
                        * You make your own data structure on your own data model
                        * Documentation...is...always correct...and...updated?
                      * No standardized request? <!-- .element: class="fragment" -->
                        * I must have a documentation for each POST and PUT?</li>
                      * How to handle linking in JSON? <!-- .element: class="fragment" -->
                          * XML, HTML, Atom
                 </script>
              </section>
              <section data-markdown class="">
                    <script type="text/template">
                      ## How to use JSON for HATEOAS
                      * HAL - Hypertext Application Language
                        * http://stateless.co/hal_specification.html
                      * JSON API
                        * http://jsonapi.org/
                      * JSON-LD (+ HYDRA)
                        * http://json-ld.org/
                      * Collection+JSON
                        * http://amundsen.com/media-types/collection/
                      * Siren
                        * https://github.com/kevinswiber/siren
                      * JSON Home
                        * https://tools.ietf.org/html/draft-nottingham-json-home-05

                    </script>
              </section>
              <section data-markdown class="">
                    <script type="text/template">
                      ## HAL - application/hal+json

                      <img width="62%" src="../images/HAL.png" alt="">
                    </script>
              </section>
              <section data-markdown class="center">

                <script type="text/template">
                <div class="center">
                  ## Pragmatic ReST or ReSTafarian?

                  <img width="30%" src="../images/restafarian.jpg" alt="">
                </div>
              </script>
              </section>
              <section>
                  <div class="center">
                    <h2>GraphQL FTW???</h2>
                    
                  </div>
  
                </section>
            </section>
            <section>
              <section data-markdown class="center">
                  <script type="text/template">
                    ## Examination assignment 2
                    https://coursepress.lnu.se/kurs/the-web-as-an-application-platform/examination-2/
                  </script>

              </section>
              <section data-markdown class="center">

                  <script type="text/template">
                      ## Next time
                      * A more pragmatic view
                        * Web API keys
                        * Web API Security
                        * Tips and tricks
                        * ...
                    </script>
              </section>
              <section data-markdown class="center">

                  <script type="text/template">
                    ## BYE!
                    ![beatles](../images/bye-beatles.gif)
                  </script>
              </section>
            </section>
        </div>
    </div>

    <script src="../reveal.js/lib/js/head.min.js"></script>
    <script src="../reveal.js/js/reveal.js"></script>

    <script>
        // Full list of configuration options available at:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            width: 1280,
            height: 800,
            controls: true,
            progress: true,
            history: true,
            center: false,

            transition: 'slide', // none/fade/slide/convex/concave/zoom

            // Optional reveal.js plugins
            dependencies: [
                { src: '../reveal.js/lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: '../reveal.js/plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: '../reveal.js/plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: '../reveal.js/plugin/highlight/highlight.js', async: true, condition: function () { return !!document.querySelector('pre code'); }, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: '../reveal.js/plugin/zoom-js/zoom.js', async: true },
                { src: '../reveal.js/plugin/notes/notes.js', async: true }
            ]
        });

    </script>

</body>
</html>
